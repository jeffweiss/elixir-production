{
  "description": "Elixir production quality enforcement hooks",
  "hooks": {
    "SessionStart": [
      {
        "matcher": "startup|resume|clear|compact",
        "hooks": [
          {
            "type": "command",
            "command": "${CLAUDE_PLUGIN_ROOT}/hooks/scripts/session-start.sh",
            "async": false
          }
        ]
      }
    ],

    "PreToolUse": [
      {
        "matcher": "Write:*.ex|Write:*.exs|Edit:*.ex|Edit:*.exs",
        "hooks": [
          {
            "type": "prompt",
            "prompt": "Before writing/editing this Elixir code, verify: 1) Are typespecs needed for public functions? 2) Is error handling explicit with tagged tuples ({:ok, value} / {:error, reason})? 3) Are tests required for new functionality? Only proceed if yes, or explicitly document why not (e.g., SPIKE mode).",
            "timeout": 30
          }
        ]
      },
      {
        "matcher": "Bash:git commit*|Bash:git push*",
        "hooks": [
          {
            "type": "command",
            "command": "${CLAUDE_PLUGIN_ROOT}/hooks/scripts/enforce-precommit.sh",
            "blocking": true,
            "description": "Enforces mix precommit before any git commit or push. BLOCKING â€” commit will not proceed until all checks pass."
          }
        ]
      }
    ],

    "PostToolUse": [
      {
        "matcher": "Edit:*.ex|Edit:*.exs|Write:*.ex|Write:*.exs",
        "hooks": [
          {
            "type": "command",
            "command": "${CLAUDE_PLUGIN_ROOT}/hooks/scripts/quick-validate.sh",
            "blocking": false,
            "description": "Quick validation of edited Elixir files (compile + format check). Non-blocking."
          }
        ]
      }
    ]
  },

  "environment": {
    "ELIXIR_VALIDATE_ON_EDIT": "1"
  },

  "notes": [
    "SessionStart bootstraps non-negotiable rules (precommit, TDD) and checks environment",
    "PreToolUse on .ex/.exs prompts about typespecs, error handling, tests",
    "PreToolUse on git commit/push BLOCKS until mix precommit passes",
    "PostToolUse provides fast feedback on edited files (non-blocking)",
    "Configure behavior via .claude/elixir-production.local.md per project"
  ]
}
